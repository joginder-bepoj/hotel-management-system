<section class="content">
  <div class="content-block">
    <div class="block-header">
      <app-breadcrumb [title]="'Orders History'" [items]="['Home', 'Restaurant']" [active_item]="'Orders'"></app-breadcrumb>
    </div>

    <div class="row clearfix">
      <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
        <div class="card">
          <div class="header">
            <h2>All Orders</h2>
          </div>
          <div class="body">
            <div class="table-responsive">
              <table mat-table [dataSource]="orders" class="w-100">

                <ng-container matColumnDef="orderNumber">
                  <th mat-header-cell *matHeaderCellDef> Order # </th>
                  <td mat-cell *matCellDef="let order"> {{order.orderNumber}} </td>
                </ng-container>

                <ng-container matColumnDef="type">
                  <th mat-header-cell *matHeaderCellDef> Type </th>
                  <td mat-cell *matCellDef="let order"> {{order.type}} </td>
                </ng-container>

                <ng-container matColumnDef="location">
                  <th mat-header-cell *matHeaderCellDef> Location </th>
                  <td mat-cell *matCellDef="let order"> 
                    <span *ngIf="order.type === 'Dine-in'">Table {{order.tableNumber}}</span>
                    <span *ngIf="order.type === 'Room Service'">Room {{order.roomNumber}}</span>
                  </td>
                </ng-container>

                <ng-container matColumnDef="items">
                  <th mat-header-cell *matHeaderCellDef> Items </th>
                  <td mat-cell *matCellDef="let order"> 
                    <span class="text-muted text-truncate d-inline-block" style="max-width: 200px;">
                      {{order.items.length}} items
                    </span>
                  </td>
                </ng-container>

                <ng-container matColumnDef="total">
                  <th mat-header-cell *matHeaderCellDef> Total </th>
                  <td mat-cell *matCellDef="let order"> â‚¹{{order.total}} </td>
                </ng-container>

                <ng-container matColumnDef="status">
                  <th mat-header-cell *matHeaderCellDef> Status </th>
                  <td mat-cell *matCellDef="let order"> 
                    <span class="badge" [ngClass]="getStatusClass(order.status)">{{order.status}}</span>
                  </td>
                </ng-container>

                <ng-container matColumnDef="payment">
                   <th mat-header-cell *matHeaderCellDef> Payment </th>
                   <td mat-cell *matCellDef="let order">
                     <span class="badge" [ngClass]="getPaymentStatusClass(order.isPaid)">
                       {{order.isPaid ? 'Paid' : 'Unpaid'}}
                     </span>
                   </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
              </table>
              
              <div class="text-center p-4" *ngIf="orders.length === 0">
                No orders found.
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
